{
  "db_name": "PostgreSQL",
  "query": "\n        INSERT INTO usage (\n            api_key_id, model_id, user_id,\n            total_tokens\n        )\n        SELECT\n            ak.api_key_id, m.model_id, ak.user_id,\n            $3\n        FROM\n            (\n                SELECT api_key_id, user_id\n                FROM api_keys\n                WHERE api_key = $1\n            ) ak\n        JOIN\n            (\n                SELECT model_id\n                FROM models\n                WHERE model_name = $2\n            ) m ON true\n        JOIN\n            users u ON u.user_id = ak.user_id AND u.usage_record = true\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Text",
        "Text",
        "Int8"
      ]
    },
    "nullable": []
  },
  "hash": "44742d0ad7e1fcb40f30690ff727ccd871f078eb3dc09b5cd482618ebedaac88"
}
